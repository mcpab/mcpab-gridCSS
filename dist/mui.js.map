{"version":3,"sources":["../src/integration/mui/GridCssMuiRenderer.tsx","../src/integration/mui/DefaultNodeRender.tsx"],"sourcesContent":["/**\n * Grid CSS MUI Renderer\n *\n * This module provides the main MUI-based renderer for CSS Grid layouts. It converts\n * layout definitions with absolute coordinates into rendered MUI components with proper\n * CSS Grid positioning and responsive behavior.\n *\n * Key Features:\n * - Responsive CSS Grid container with configurable grid options\n * - Automatic node positioning using CSS Grid coordinates\n * - Error handling and diagnostic reporting for missing coordinates\n * - Flexible content rendering through render prop overrides\n * - Integration with MUI theming and styling system\n * - Support for implicit grid sizing and overflow behaviors\n *\n * The renderer creates a CSS Grid container and positions all nodes within it,\n * handling responsive breakpoints and providing fallback behaviors for missing data.\n */\n\n// MUI core imports - using specific file paths for better tree shaking\nimport Box from \"@mui/material/Box\";\nimport { MuiSxProps } from \"./muiTypes\";\n// Internal type imports for grid system integration\nimport { BlocksIDs, SectionIDs } from \"../../templates/layoutIDs\"; // Template identifier types\nimport { DefaultNodeRender } from \"./DefaultNodeRender\"; // Default node rendering component\nimport {\n  LayoutAbsolute,\n  LayoutRenderingOverride,\n  NodeRenderConfig,\n} from \"../../boxLayout\"; // Layout types\nimport { BPs, BREAKPOINTS } from \"../../breakpoints\"; // Breakpoint system\nimport { gapValueToString, gridUnitValueToString } from \"../../cssStringify\"; // CSS value utilities\nimport {\n  DiagnosticEntry,\n  makeError,\n  GRID_ERROR_CODE,\n} from \"../../gridErrorShape\"; // Error handling\nimport { CSSCoordinates } from \"../../gridNodeTypes\"; // CSS coordinate types\nimport { GridOptions } from \"../../gridOptionsTypes\"; // Grid configuration options\n\n/**\n * Convert grid options to MUI sx props for the CSS Grid container\n *\n * Transforms GridOptions configuration into MUI-compatible sx properties\n * that control CSS Grid behavior including sizing, alignment, flow, and spacing.\n *\n * Grid Configuration:\n * - Implicit sizing: Controls how auto-generated rows/columns are sized\n * - Auto flow: Direction for placing items in implicit grid areas\n * - Alignment: Controls item and content alignment within the grid\n * - Gap: Spacing between grid items (overall, row-specific, column-specific)\n * - Overflow: How content overflow is handled\n *\n * @param gridOptions - Partial grid configuration object\n * @returns MUI sx props object for the grid container\n */\nfunction getSxProps(gridOptions: Partial<GridOptions>): MuiSxProps {\n  // Calculate gap CSS value with fallback to zero\n  const gapCss = gridOptions.gap ? gapValueToString(gridOptions.gap) : \"0px\";\n\n  return {\n    // Implicit grid track sizing for auto-generated columns\n    gridAutoColumns:\n      gridOptions.implicitColumnUnits == null\n        ? \"auto\" // Browser default: size to content\n        : gridUnitValueToString(gridOptions.implicitColumnUnits),\n\n    // Implicit grid track sizing for auto-generated rows\n    gridAutoRows:\n      gridOptions.implicitRowUnits == null\n        ? \"auto\" // Browser default: size to content\n        : gridUnitValueToString(gridOptions.implicitRowUnits),\n\n    // Direction for auto-placement of grid items\n    gridAutoFlow: gridOptions.autoFlow ?? \"row\", // Default: row-wise placement\n\n    // Container overflow behavior\n    overflow: gridOptions.overflow ?? \"visible\", // Default: don't clip content\n\n    // Individual item alignment within their grid areas\n    justifyItems: gridOptions.justifyItems ?? \"stretch\", // Horizontal alignment\n    alignItems: gridOptions.alignItems ?? \"stretch\", // Vertical alignment\n\n    // Grid content alignment within the container\n    justifyContent: gridOptions.justifyContent ?? \"start\", // Horizontal content alignment\n    alignContent: gridOptions.alignContent ?? \"start\", // Vertical content alignment\n\n    // Grid gap configuration with fallbacks\n    gap: gapCss, // Overall gap for both rows and columns\n    rowGap: gridOptions.rowGap ? gapValueToString(gridOptions.rowGap) : gapCss,\n    columnGap: gridOptions.columnGap\n      ? gapValueToString(gridOptions.columnGap)\n      : gapCss,\n  };\n}\n\n/**\n * Props for the TopContainer component\n *\n * @template sectionIDs - Union type of valid section identifiers\n * @template blockIDs - Union type of valid block/box identifiers\n */\ntype MainProps<sectionIDs extends SectionIDs, blockIDs extends BlocksIDs> = {\n  layoutAbsolute: LayoutAbsolute<sectionIDs, blockIDs>; // Layout with absolute CSS coordinates\n  gridOptionsOverride?: Partial<GridOptions>; // Optional grid behavior overrides\n  children?: React.ReactNode; // Child elements to render in the grid\n};\n\n/**\n * CSS Grid Container Component\n *\n * Creates the main CSS Grid container with responsive track definitions and\n * configurable grid options. This component establishes the grid context\n * for all child nodes.\n *\n * Key Features:\n * - Responsive grid template columns/rows based on layout dimensions\n * - Flexible track sizing with minmax() for optimal responsiveness\n * - Configurable grid options (gaps, alignment, auto-sizing)\n * - Full width constraint with overflow protection\n *\n * Grid Template Strategy:\n * - Columns: Use 1fr tracks with minmax(0, 1fr) for equal distribution and shrinking\n * - Rows: Use auto-sizing with minmax(min-content, auto) for content-driven height\n *\n * @template sectionIDs - Union type of valid section identifiers\n * @template blockIDs - Union type of valid block/box identifiers\n * @param props - Component props including layout and grid options\n * @returns Rendered CSS Grid container\n */\nfunction TopContainer<\n  sectionIDs extends SectionIDs,\n  blockIDs extends BlocksIDs\n>({\n  layoutAbsolute,\n  gridOptionsOverride,\n  children,\n}: MainProps<sectionIDs, blockIDs>) {\n  // Convert grid options to MUI sx props\n  const gridOptionsResolved: MuiSxProps = getSxProps(gridOptionsOverride || {});\n\n  return (\n    <Box\n      sx={{\n        display: \"grid\",\n\n        // Container sizing constraints\n        // ðŸ”’ Hard clamp to parent width to prevent overflow\n        width: \"100%\", // Fill available width\n        maxWidth: \"100%\", // Never exceed parent width\n        minWidth: 0, // Allow shrinking below natural minimum\n        boxSizing: \"border-box\", // Include padding/border in width\n\n        // Responsive grid template definitions\n        // ðŸ”’ Allow tracks to shrink using minmax(0, 1fr)\n        gridTemplateColumns: {\n          xs: `repeat(${layoutAbsolute.gridDimensions.columns.xs}, minmax(0, 1fr))`,\n          sm: `repeat(${layoutAbsolute.gridDimensions.columns.sm}, minmax(0, 1fr))`,\n          md: `repeat(${layoutAbsolute.gridDimensions.columns.md}, minmax(0, 1fr))`,\n          lg: `repeat(${layoutAbsolute.gridDimensions.columns.lg}, minmax(0, 1fr))`,\n          xl: `repeat(${layoutAbsolute.gridDimensions.columns.xl}, minmax(0, 1fr))`,\n        },\n\n        // Row templates with content-driven sizing\n        gridTemplateRows: {\n          xs: `repeat(${layoutAbsolute.gridDimensions.rows.xs}, minmax(min-content, auto))`,\n          sm: `repeat(${layoutAbsolute.gridDimensions.rows.sm}, minmax(min-content, auto))`,\n          md: `repeat(${layoutAbsolute.gridDimensions.rows.md}, minmax(min-content, auto))`,\n          lg: `repeat(${layoutAbsolute.gridDimensions.rows.lg}, minmax(min-content, auto))`,\n          xl: `repeat(${layoutAbsolute.gridDimensions.rows.xl}, minmax(min-content, auto))`,\n        },\n\n        // Apply configured grid options (gaps, alignment, etc.)\n        ...gridOptionsResolved,\n      }}\n    >\n      {children}\n    </Box>\n  );\n}\n\n/**\n * Props for the main GridCssMuiRenderer component\n *\n * @template sectionID - Union type of valid section identifiers\n * @template blockID - Union type of valid block/box identifiers\n * @template LA - Layout type extending LayoutAbsolute\n */\nexport type GridCssMuiRendererProps<\n  sectionID extends SectionIDs,\n  blockID extends BlocksIDs,\n  LA extends LayoutAbsolute<sectionID, blockID>\n> = {\n  layoutAbsolute: LA; // Layout with absolute CSS coordinates\n  diagnostics: DiagnosticEntry[]; // Array to collect errors and warnings\n  layoutRendering?: LayoutRenderingOverride<sectionID, blockID>; // Optional custom rendering overrides\n  gridOptionsOverride?: Partial<GridOptions>; // Optional grid behavior configuration\n};\n\n/**\n * Internal type for managing box rendering data during processing\n *\n * Combines box identification, coordinates, and rendering configuration\n * into a single object for efficient processing.\n */\ntype BoxRenderer<sectionID extends SectionIDs, blockID extends BlocksIDs> = {\n  sectionId: sectionID; // Parent section identifier\n  boxId: blockID; // Box identifier within section\n  coordinate: BPs<CSSCoordinates>; // CSS coordinates for all breakpoints\n  content: NodeRenderConfig<sectionID, blockID>; // Rendering configuration\n};\n\n/**\n * Dummy CSS coordinates for initialization\n *\n * Used as placeholder values during node processing before real\n * coordinates are assigned. Zero values indicate uninitialized state.\n */\nconst dummyCSSCoordinates: CSSCoordinates = {\n  gridColumnStart: 0,\n  gridColumnEnd: 0,\n  gridRowStart: 0,\n  gridRowEnd: 0,\n};\n\n/**\n * Extract keys from a Partial Record type\n *\n * Type-safe utility for getting object keys when some properties may be undefined.\n * Used for iterating over box collections where some boxes may not exist.\n *\n * @param obj - Partial record with potentially missing keys\n * @returns Array of present keys with correct typing\n */\nexport function partialRecordKeys<K extends string, V>(\n  obj: Partial<Record<K, V>>\n): K[] {\n  return Object.keys(obj) as K[];\n}\n\n/**\n * Extract keys from a complete Record type\n *\n * Type-safe utility for getting object keys when all properties are present.\n * Used for iterating over section collections.\n *\n * @param obj - Record with all keys present\n * @returns Array of keys with correct typing\n */\nexport function recordKeys<K extends string, V>(obj: Record<K, V>): K[] {\n  return Object.keys(obj) as K[];\n}\n\n/**\n * Fallback CSS coordinates for error recovery\n *\n * Used when a box is missing coordinates for a breakpoint. Places the box\n * in a minimal 1x1 grid area at position (1,1) to prevent layout breakage.\n */\nconst fallbackCSSCoordinates: CSSCoordinates = {\n  gridColumnStart: 1, // Start at first column\n  gridColumnEnd: 2, // End after first column (1 column wide)\n  gridRowStart: 1, // Start at first row\n  gridRowEnd: 2, // End after first row (1 row tall)\n};\n\n/**\n * Extract typed keys from any object\n *\n * Generic utility for type-safe key extraction from objects.\n *\n * @param obj - Object to extract keys from\n * @returns Array of typed keys\n */\nexport function typedKeys<T extends object>(obj: T): Array<keyof T> {\n  return Object.keys(obj) as Array<keyof T>;\n}\n/**\n * Main Grid CSS MUI Renderer Component\n *\n * Renders a complete CSS Grid layout using Material-UI components. This is the primary\n * entry point for converting layout definitions into rendered UI components.\n *\n * Processing Flow:\n * 1. Extract and process all boxes from all sections across all breakpoints\n * 2. Build node registry with coordinates and rendering configurations\n * 3. Handle missing coordinates with error reporting and fallbacks\n * 4. Render CSS Grid container with positioned child nodes\n *\n * Error Handling:\n * - Missing breakpoint data: Reports errors and skips processing\n * - Missing box coordinates: Reports errors and applies fallback positioning\n * - Malformed data: Graceful degradation with diagnostic reporting\n *\n * @template sectionID - Union type of valid section identifiers\n * @template blockID - Union type of valid block/box identifiers\n * @template LA - Layout type extending LayoutAbsolute\n * @param props - Component props including layout, rendering overrides, and options\n * @returns Rendered CSS Grid layout with positioned nodes\n */\nexport function GridCssMuiRenderer<\n  sectionID extends SectionIDs,\n  blockID extends BlocksIDs,\n  LA extends LayoutAbsolute<sectionID, blockID>\n>({\n  layoutAbsolute,\n  layoutRendering,\n  diagnostics,\n  gridOptionsOverride,\n}: GridCssMuiRendererProps<sectionID, blockID, LA>) {\n  // Registry for all nodes to be rendered, indexed by unique key\n  const nodes: Record<string, BoxRenderer<sectionID, blockID>> = {};\n\n  // Extract all section IDs for processing\n  const sectionIds = recordKeys(layoutAbsolute.sections);\n\n  // PHASE 1: Process all sections and breakpoints to build node registry\n  // This creates a comprehensive map of all boxes with their coordinates and rendering config\n  for (const sectionId of sectionIds) {\n    // Process each responsive breakpoint for this section\n    for (const bp of BREAKPOINTS) {\n      // Get box coordinates for this section at this breakpoint\n      const boxesAtBP = layoutAbsolute.sections[sectionId].coordinates[bp];\n\n      // Validate breakpoint data exists (should always be present per type, but check runtime)\n      if (!boxesAtBP) {\n        diagnostics.push(\n          makeError(\n            \"GridCssMuiRenderer\",\n            GRID_ERROR_CODE.SECTION_SHAPES_MISSING_BP,\n            `Missing box shapes for section \"${String(\n              sectionId\n            )}\" at breakpoint \"${bp}\"`,\n            { details: { sectionId, bp } }\n          )\n        );\n        continue;\n      }\n\n      // Extract all box IDs for this breakpoint\n      const boxIds = partialRecordKeys(boxesAtBP);\n\n      // Process each box in this section at this breakpoint\n      for (const boxId of boxIds) {\n        const crd = boxesAtBP[boxId];\n\n        // Validate box coordinates exist\n        if (!crd) {\n          diagnostics.push(\n            makeError(\n              \"GridCssMuiRenderer\",\n              GRID_ERROR_CODE.BOX_SHAPE_MISSING_BP,\n              `Missing box shape for box \"${String(\n                boxId\n              )}\" in section \"${String(sectionId)}\" at breakpoint \"${bp}\"`,\n              { details: { sectionId, boxId, bp } }\n            )\n          );\n          continue;\n        }\n\n        // Create unique node identifier for registry\n        const nodeKey = `${String(sectionId)}::${String(boxId)}`;\n\n        // Resolve rendering configuration with safe fallbacks\n        // Check for custom rendering override, otherwise use default empty renderer\n        const resolved: NodeRenderConfig<sectionID, blockID> =\n          (layoutRendering?.[sectionId]?.[bp]?.[boxId] as\n            | NodeRenderConfig<sectionID, blockID>\n            | undefined) ?? {\n            contentRenderer: () => <></>, // Empty fragment as fallback\n            view: {}, // Empty view options as fallback\n          };\n\n        // Initialize node entry if this is the first time we've seen this box\n        if (!nodes[nodeKey]) {\n          nodes[nodeKey] = {\n            sectionId,\n            boxId,\n            // Initialize all breakpoint coordinates with dummy values\n            coordinate: {\n              xs: dummyCSSCoordinates,\n              sm: dummyCSSCoordinates,\n              md: dummyCSSCoordinates,\n              lg: dummyCSSCoordinates,\n              xl: dummyCSSCoordinates,\n            },\n            content: resolved, // Use resolved rendering configuration\n          };\n        } else {\n          // Node already exists from processing another breakpoint\n          // Keep first content configuration unless policy is \"latest wins\"\n          if (!nodes[nodeKey].content) nodes[nodeKey].content = resolved;\n        }\n\n        // Set coordinates for this specific breakpoint\n        nodes[nodeKey].coordinate[bp] = crd;\n      }\n    }\n  }\n\n  // PHASE 2: Repair missing coordinates for all registered nodes\n  // Some nodes may be missing coordinates for certain breakpoints\n  for (const nodeKey of Object.keys(nodes)) {\n    const node = nodes[nodeKey];\n\n    // Check each breakpoint for missing/invalid coordinates\n    for (const bp of BREAKPOINTS) {\n      const crd = node.coordinate[bp];\n\n      // Check if coordinates are still dummy values (all zeros indicate unset)\n      if (\n        crd.gridColumnStart === 0 &&\n        crd.gridColumnEnd === 0 &&\n        crd.gridRowStart === 0 &&\n        crd.gridRowEnd === 0\n      ) {\n        // Generate error message for missing coordinates\n        const message = `Box \"${String(node.boxId)}\" in section \"${String(\n          node.sectionId\n        )}\" is missing coordinates for breakpoint \"${bp}\". Recovering with default coordinates.`;\n\n        // Report the issue and apply fallback coordinates\n        diagnostics.push(\n          makeError(\n            \"GridCssMuiRenderer\",\n            GRID_ERROR_CODE.MISSING_COORDINATES,\n            message,\n            {\n              details: { sectionId: node.sectionId, boxId: node.boxId, bp },\n            }\n          )\n        );\n\n        // Apply fallback coordinates to prevent layout breakage\n        node.coordinate[bp] = fallbackCSSCoordinates;\n      }\n    }\n  }\n\n  // PHASE 3: Render the complete layout\n  // Create CSS Grid container with all positioned nodes\n  return (\n    <TopContainer\n      layoutAbsolute={layoutAbsolute}\n      gridOptionsOverride={gridOptionsOverride}\n    >\n      {/* Render each node using DefaultNodeRender component */}\n      {Object.entries(nodes).map(([nodeKey, node]) => (\n        <DefaultNodeRender\n          key={nodeKey} // Unique React key for efficient updates\n          cssCoordinateBPs={node.coordinate} // Responsive CSS Grid coordinates\n          section={node.sectionId} // Section identifier\n          boxId={node.boxId} // Box identifier\n          content={node.content} // Rendering configuration\n        />\n      ))}\n    </TopContainer>\n  );\n}\n","/**\n * Default Node Renderer for MUI Integration\n * \n * This module provides the default rendering implementation for grid nodes using Material-UI\n * components. It handles responsive CSS Grid positioning, accessibility attributes, and\n * visual styling options for nodes within a grid layout system.\n * \n * Features:\n * - Responsive CSS Grid positioning across all breakpoints\n * - Accessibility support (ARIA attributes, roles, labels)\n * - Flexible visibility controls (hidden, visually hidden)\n * - Data attributes and DOM properties management\n * - Integration with MUI theming and breakpoint system\n * - Customizable content rendering through render props\n * \n * The renderer converts grid coordinates to CSS Grid properties and applies\n * them responsively using MUI's sx prop system.\n */\n\n'use client';\n\n// MUI core imports - using specific file paths for better tree shaking\nimport { useTheme } from '@mui/material/styles';\nimport useMediaQuery from '@mui/material/useMediaQuery';\nimport Box  from '@mui/material/Box';\n import { MuiTheme } from './muiTypes';\nimport type { MuiSystemStyleObject } from './muiTypes';\nimport React from 'react';\n// Internal type imports for grid system integration\nimport { BlocksIDs, SectionIDs } from '../../templates/layoutIDs';  // Template identifier types\nimport { NodeRenderConfig } from '../../boxLayout';                   // Node rendering configuration\nimport { BPs } from '../../breakpoints';                              // Breakpoint types\nimport { CSSCoordinates } from '../../gridNodeTypes';                 // CSS Grid coordinate types\nimport { GridNodeViewOptions } from '../../nodeViewOptions';          // View configuration options\n\n/**\n * CSS styles for visually hiding elements while keeping them accessible to screen readers\n * \n * This follows the \"visually hidden\" pattern that hides content visually but keeps it\n * accessible to assistive technologies. Used when view.visibility is set to 'visuallyHidden'.\n * \n * Key properties:\n * - position: absolute - Remove from normal document flow\n * - width/height: 1px - Minimal size to avoid being ignored\n * - margin: -1px - Pull back to not affect layout\n * - overflow: visible - Don't clip content\n * - clip: rect(0 0 0 0) - Legacy clipping for older browsers\n * - whiteSpace: nowrap - Prevent text wrapping\n * - border: 0 - Remove any border\n */\nconst visuallyHiddenStyle: MuiSystemStyleObject = {\n  position: 'absolute',\n  width: 1,\n  height: 1,\n  padding: 0,\n  margin: -1,\n  overflow: 'visible',\n  clip: 'rect(0 0 0 0)',\n  whiteSpace: 'nowrap',\n  border: 0,\n};\n\n/**\n * Generate MUI sx props based on grid node view options\n * \n * Converts GridNodeViewOptions into MUI's sx prop object, handling various\n * visual and layout properties including sizing constraints, positioning,\n * visibility, and accessibility.\n * \n * Supported options:\n * - minWidth0/minHeight0: Allow content to shrink below natural minimum\n * - justifySelf/alignSelf: CSS Grid alignment within grid area\n * - zIndex: Stacking order control\n * - pointerEvents: Mouse interaction control\n * - visibility: Show/hide/visually-hide content\n * \n * @param view - Optional view configuration object\n * @returns MUI sx prop object with computed styles\n */\nexport function getNodeSxProps(view?: GridNodeViewOptions): MuiSystemStyleObject  {\n  // Use empty object as default if no view options provided\n  const v = view ?? {};\n\n  // Extract sizing constraint options with sensible defaults\n  const minWidth0 = v.minWidth0 ?? true;   // Allow shrinking below min width by default\n  const minHeight0 = v.minHeight0 ?? true; // Allow shrinking below min height by default\n\n  return {\n    // Apply minimum size constraints conditionally\n    ...(minWidth0 ? { minWidth: 0 } : {}),\n    ...(minHeight0 ? { minHeight: 0 } : {}),\n\n    // CSS Grid alignment within the assigned grid area\n    justifySelf: v.justifySelf ?? 'stretch',  // Horizontal alignment (default: fill area)\n    alignSelf: v.alignSelf ?? 'stretch',      // Vertical alignment (default: fill area)\n\n    // Stacking order control (only apply if explicitly set)\n    ...(v.zIndex != null ? { zIndex: v.zIndex } : {}),\n    \n    // Mouse interaction control\n    pointerEvents: v.pointerEvents ?? 'auto',\n\n    // Visibility handling with different hide mechanisms\n    ...(v.visibility === 'hidden' ? { visibility: 'hidden' } : {}),\n    ...(v.visibility === 'visuallyHidden' ? visuallyHiddenStyle : {}),\n  };\n}\n\n/**\n * Generate DOM attributes and props from grid node view options\n * \n * Converts GridNodeViewOptions into React DOM attributes, specifically handling\n * accessibility (ARIA) attributes and custom data attributes. This ensures proper\n * semantic markup and accessibility support for grid nodes.\n * \n * Supported features:\n * - ARIA attributes (role, label, labelledby, describedby)\n * - Custom data attributes with automatic \"data-\" prefixing\n * - Type-safe attribute handling\n * \n * @param view - Optional view configuration object\n * @returns Object containing React DOM attributes\n */\n\ntype DataAttributes = Record<`data-${string}`, string>;\n\nexport function getNodeDomProps(\n  view?: GridNodeViewOptions,\n): React.HTMLAttributes<HTMLElement> & DataAttributes {\n  const v = view ?? {};\n  const aria = v.aria ?? {};\n\n  const domProps: React.HTMLAttributes<HTMLElement> & Partial<DataAttributes> = {};\n\n  if (aria.role) domProps.role = aria.role;\n  if (aria.label) domProps[\"aria-label\"] = aria.label;\n  if (aria.labelledBy) domProps[\"aria-labelledby\"] = aria.labelledBy;\n  if (aria.describedBy) domProps[\"aria-describedby\"] = aria.describedBy;\n\n  if (v.dataAttrs) {\n    for (const [k, val] of Object.entries(v.dataAttrs)) {\n      const key = (k.startsWith(\"data-\") ? k : `data-${k}`) as `data-${string}`;\n      domProps[key] = String(val);\n    }\n  }\n\n  return domProps as React.HTMLAttributes<HTMLElement> & DataAttributes;\n}\n/**\n * Props for the DefaultNodeRender component\n * \n * @template sectionIDs - Union type of valid section identifiers\n * @template blockIDs - Union type of valid block/box identifiers\n */\ntype DefaultNodeRenderProps<sectionIDs extends SectionIDs, blockIDs extends BlocksIDs> = {\n  section: sectionIDs;                    // The section this node belongs to\n  boxId: blockIDs;                        // Unique identifier for this box/node\n  cssCoordinateBPs: BPs<CSSCoordinates>;  // CSS Grid coordinates for all breakpoints\n  content: NodeRenderConfig<sectionIDs, blockIDs>; // Rendering configuration and content\n};\n\n/**\n * Default Node Renderer Component\n * \n * Renders a grid node using Material-UI components with full responsive CSS Grid support.\n * This component handles the conversion from grid coordinates to CSS Grid properties\n * and applies them across all responsive breakpoints.\n * \n * Key Features:\n * - Responsive CSS Grid positioning using MUI breakpoint system\n * - Automatic breakpoint detection and coordinate application\n * - Accessibility attribute management\n * - Flexible content rendering through render props\n * - Integration with MUI theming\n * \n * The component uses MUI's useMediaQuery to detect the current breakpoint and\n * applies the appropriate CSS Grid coordinates for that breakpoint.\n * \n * @template sectionIDs - Union type of valid section identifiers\n * @template blockIDs - Union type of valid block/box identifiers\n * @param props - Component props including coordinates, content, and identifiers\n * @returns Rendered grid node as MUI Box component\n */\nexport function DefaultNodeRender<sectionIDs extends SectionIDs, blockIDs extends BlocksIDs>({\n  section,\n  boxId,\n  cssCoordinateBPs,\n  content,\n}: DefaultNodeRenderProps<sectionIDs, blockIDs>) {\n  // Generate styling and DOM properties from view configuration\n  const nodeSx = getNodeSxProps(content.view);\n  const domProps = getNodeDomProps(content.view);\n\n  // Access MUI theme for breakpoint detection\n  const theme = useTheme();\n\n  // Use MUI's breakpoint system to detect current screen size\n  // These hooks return true if screen is at or above the specified breakpoint\n  const upSm = useMediaQuery(theme.breakpoints.up('sm'));\n  const upMd = useMediaQuery(theme.breakpoints.up('md'));\n  const upLg = useMediaQuery(theme.breakpoints.up('lg'));\n  const upXl = useMediaQuery(theme.breakpoints.up('xl'));\n\n  // Determine current breakpoint using waterfall logic\n  // Checks from largest to smallest breakpoint\n  const bp = upXl ? 'xl' : upLg ? 'lg' : upMd ? 'md' : upSm ? 'sm' : 'xs';\n\n  return (\n    <Box\n      {...domProps} // Apply accessibility and data attributes\n      sx={{\n        // Foundation styles for proper grid node behavior\n        boxSizing: 'border-box',     // Include padding/border in size calculations\n        position: 'relative',        // Establish positioning context for children\n        overflow: 'visible',         // Don't clip content by default (opt-in clipping via view)\n        minWidth: 0,                 // Allow content to shrink below natural minimum width\n        minHeight: 0,                // Allow content to shrink below natural minimum height\n\n        // Responsive CSS Grid positioning\n        // Each breakpoint gets its specific grid coordinates\n        gridColumnStart: {\n          xs: cssCoordinateBPs.xs.gridColumnStart,\n          sm: cssCoordinateBPs.sm.gridColumnStart,\n          md: cssCoordinateBPs.md.gridColumnStart,\n          lg: cssCoordinateBPs.lg.gridColumnStart,\n          xl: cssCoordinateBPs.xl.gridColumnStart,\n        },\n        gridColumnEnd: {\n          xs: cssCoordinateBPs.xs.gridColumnEnd,\n          sm: cssCoordinateBPs.sm.gridColumnEnd,\n          md: cssCoordinateBPs.md.gridColumnEnd,\n          lg: cssCoordinateBPs.lg.gridColumnEnd,\n          xl: cssCoordinateBPs.xl.gridColumnEnd,\n        },\n        gridRowStart: {\n          xs: cssCoordinateBPs.xs.gridRowStart,\n          sm: cssCoordinateBPs.sm.gridRowStart,\n          md: cssCoordinateBPs.md.gridRowStart,\n          lg: cssCoordinateBPs.lg.gridRowStart,\n          xl: cssCoordinateBPs.xl.gridRowStart,\n        },\n        gridRowEnd: {\n          xs: cssCoordinateBPs.xs.gridRowEnd,\n          sm: cssCoordinateBPs.sm.gridRowEnd,\n          md: cssCoordinateBPs.md.gridRowEnd,\n          lg: cssCoordinateBPs.lg.gridRowEnd,\n          xl: cssCoordinateBPs.xl.gridRowEnd,\n        },\n\n        // Apply view-driven style overrides\n        // This includes alignment, sizing, visibility, z-index, etc.\n        ...nodeSx,\n      }}\n    >\n      {/* Render content using the provided content renderer */}\n      {/* The renderer receives context about the current breakpoint and coordinates */}\n      {content.contentRenderer\n        ? content.contentRenderer({ \n            sectionId: section, \n            bp, \n            boxId, \n            coords: cssCoordinateBPs[bp] \n          })\n        : null}\n    </Box>\n  );\n}\n"],"mappings":"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","names":["Box","jsx","Box"]}