{"version":3,"sources":["../src/breakpoints.ts","../src/gridErrorShape.ts","../src/cssStringify.ts"],"sourcesContent":["\n/**\n * Standard responsive breakpoint names\n */\n\nexport const BREAKPOINTS = [\"xs\", \"sm\", \"md\", \"lg\", \"xl\"] as const; \nexport type Breakpoint = (typeof BREAKPOINTS)[number];\n/**\n * Complete breakpoint record with all breakpoints required\n */\n\nexport type BPs<T> = Record<Breakpoint, T>; \n/**\n * Partial breakpoint record with only xs required\n */\n\nexport type PartialBps<T> = { xs: T; } & Partial<Record<Exclude<Breakpoint, 'xs'>, T>>;\n\n","/**\n * @fileoverview Grid error handling and diagnostic system.\n * Provides types and utilities for error reporting, validation, and debugging in the grid layout system.\n * @module GridErrorShape\n */\n \nimport { AllBoxMovesProps } from \"./boxTransformations/boxTransformationsProps\";\nimport { NodeID } from \"./templates/layoutIDs\";\n\n\n/**\n * Severity levels for diagnostic messages.\n * \n * @example\n * ```typescript\n * // 1) Severity\n * const errorLevel: DiagnosticSeverity = 'error';\n * const warningLevel: DiagnosticSeverity = 'warning';\n * ```\n */\nexport type DiagnosticSeverity = 'error' | 'warning' | 'info';\n\n/**\n * Origin sources for diagnostic messages indicating where in the system an issue occurred.\n * \n * @example\n * ```typescript\n * // 2) Where the diagnostic comes from (high-level, not per-function)\n * const layoutOrigin: DiagnosticOrigin = 'CSSLayout';\n * const rendererOrigin: DiagnosticOrigin = 'GridCssMuiRenderer';\n * const transformOrigin: DiagnosticOrigin = 'transformBoxMove';\n * ```\n */\nexport type DiagnosticOrigin =\n  | AllBoxMovesProps<any>  // box transformations\n  | 'transformBoxMove' // box move transformer\n  | 'layoutSectionToBounds' // layout section to bounds converter\n  | 'layoutSectionBtoAbsolute'\n  | 'CSSLayout'\n  | 'GridCssMuiRenderer'\n  | 'layoutToTx'\n  ;\n\n\n\n// 3) Canonical error codes (SCREAMING_SNAKE_CASE)\n//    Use these constants everywhere instead of string literals.\n\n// Brand marker â€“ only used by the type system\ndeclare const gridErrorCodeBrand: unique symbol;\ntype GridErrorCodeBrand = { readonly [gridErrorCodeBrand]: true };\n\n/**\n * Branded string type for grid error codes to ensure type safety.\n * \n * @example\n * ```typescript\n * // 3) Canonical error codes (SCREAMING_SNAKE_CASE)\n * //    Use these constants everywhere instead of string literals.\n * const errorCode: GridErrorCode = GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED;\n * ```\n */\nexport type GridErrorCode = string & GridErrorCodeBrand;\n\n/**\n * Canonical error code constants for the grid layout system.\n * Use these constants instead of string literals for type safety and consistency.\n * \n * @example\n * ```typescript\n * // Core grid issues\n * GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED\n * \n * // Transformation issues  \n * GRID_ERROR_CODE.INVALID_TRANSFORMATION_PARAMS\n * \n * // Runtime layout issues\n * GRID_ERROR_CODE.MISSING_COORDINATES\n * ```\n */\nexport const GRID_ERROR_CODE = {\n  // --- Core grid / geometry issues ----------------------------\n  OVERLAP_NOT_ALLOWED: 'OVERLAP_NOT_ALLOWED' as GridErrorCode,\n\n  // --- Pattern / semantic node issues -------------------------\n  INVALID_TRANSFORMATION_PARAMS: 'INVALID_TRANSFORMATION_PARAMS' as GridErrorCode,\n\n  // --- Runtime layout / builder anomalies --------------------\n  NO_BOXES_PROCESSED: 'NO_BOXES_PROCESSED' as GridErrorCode,\n  NO_SECTION_ID: 'NO_SECTION_ID' as GridErrorCode,\n  BOX_SHAPE_MISSING_BP: 'BOX_SHAPE_MISSING_BP' as GridErrorCode,\n  UNKNOWN_TRANSFORMATION: 'UNKNOWN_TRANSFORMATION' as GridErrorCode,\n  EMPTY_GRID: 'EMPTY_GRID' as GridErrorCode,\n  GRID_NORMALIZED_TO_POSITIVE_LINES: 'GRID_NORMALIZED_TO_POSITIVE_LINES' as GridErrorCode,\n  MISSING_COORDINATES: 'MISSING_COORDINATES' as GridErrorCode,\n  SECTION_SHAPES_MISSING_BP: 'SECTION_SHAPES_MISSING_BP' as GridErrorCode,\n  UNKNOWN_NODE_ID: 'UNKNOWN_NODE_ID' as GridErrorCode,\n  UNKNOWN_ANCHOR: 'UNKNOWN_ANCHOR' as GridErrorCode,\n  BOX_SPAN_MISSING: 'BOX_SPAN_MISSING' as GridErrorCode,\n  MISSING_BOX: 'MISSING_BOX' as GridErrorCode,\n  CONSTRAINT_VIOLATION: 'CONSTRAINT_VIOLATION' as GridErrorCode,\n} as const;\n\n/**\n * A single issue payload containing error details.\n * \n * @example\n * ```typescript\n * // 4) A single \"issue\" payload\n * const issue: GridIssue = {\n *   code: GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED,\n *   message: 'Boxes are overlapping without z-index',\n *   elementId: 'header',\n *   details: { coordinates: { x: 0, y: 0 } }\n * };\n * ```\n */\nexport type GridIssue = {\n  code: GridErrorCode;\n  message: string;\n  elementId?: NodeID;\n  details?: unknown;\n};\n\n/**\n * Unified diagnostic entry combining severity, origin, and issue details.\n * \n * @example\n * ```typescript\n * // 5) Unified diagnostic entry\n * const diagnostic: DiagnosticEntry = {\n *   severity: 'error',\n *   origin: 'CSSLayout',\n *   issue: {\n *     code: GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED,\n *     message: 'Grid overlap detected'\n *   }\n * };\n * ```\n */\nexport type DiagnosticEntry = {\n  readonly severity: DiagnosticSeverity;\n  readonly origin: DiagnosticOrigin;\n  readonly issue: GridIssue;\n};\n\n/**\n * Helper constructors for creating diagnostic entries without repeating object shape.\n * \n * @example\n * ```typescript\n * // 6) Helper constructors (so you don't repeat the object shape everywhere)\n * const extras: IssueExtras = {\n *   elementId: 'sidebar',\n *   details: { bounds: { width: 100, height: 200 } }\n * };\n * ```\n */\ntype IssueExtras = Omit<GridIssue, 'code' | 'message'>;\n\n/**\n * Creates a diagnostic entry with specified severity, origin, and issue details.\n * \n * @param severity - The severity level of the diagnostic\n * @param origin - The origin/source of the diagnostic\n * @param code - The error code\n * @param message - The error message\n * @param extras - Additional issue details\n * @returns A complete diagnostic entry\n * \n * @example\n * ```typescript\n * const diagnostic = makeDiagnostic(\n *   'error',\n *   'CSSLayout', \n *   GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED,\n *   'Grid boxes overlap detected'\n * );\n * ```\n */\nexport function makeDiagnostic(\n  severity: DiagnosticSeverity,\n  origin: DiagnosticOrigin,\n  code: GridErrorCode,\n  message: string,\n  extras: IssueExtras = {}\n): DiagnosticEntry {\n  return {\n    severity,\n    origin,\n    issue: {\n      code,\n      message,\n      ...extras,\n    },\n  };\n}\n\n/**\n * Creates an error-level diagnostic entry.\n * \n * @param origin - The origin/source of the error\n * @param code - The error code\n * @param message - The error message\n * @param extras - Additional issue details\n * @returns A diagnostic entry with 'error' severity\n * \n * @example\n * ```typescript\n * const errorDiagnostic = makeError(\n *   'GridCssMuiRenderer',\n *   GRID_ERROR_CODE.MISSING_COORDINATES,\n *   'Required coordinates are missing'\n * );\n * ```\n */\nexport function makeError(\n  origin: DiagnosticOrigin,\n  code: GridErrorCode,\n  message: string,\n  extras: IssueExtras = {}\n): DiagnosticEntry {\n  return makeDiagnostic('error', origin, code, message, extras);\n}\n\n/**\n * Creates a warning-level diagnostic entry.\n * \n * @param origin - The origin/source of the warning\n * @param code - The error code\n * @param message - The warning message\n * @param extras - Additional issue details\n * @returns A diagnostic entry with 'warning' severity\n * \n * @example\n * ```typescript\n * const warningDiagnostic = makeWarning(\n *   'CSSLayout',\n *   GRID_ERROR_CODE.OVERLAP_NOT_ALLOWED,\n *   'Grid overlap detected but allowed'\n * );\n * ```\n */\nexport function makeWarning(\n  origin: DiagnosticOrigin,\n  code: GridErrorCode,\n  message: string,\n  extras: IssueExtras = {}\n): DiagnosticEntry {\n  return makeDiagnostic('warning', origin, code, message, extras);\n}\n\n/**\n * Creates an info-level diagnostic entry.\n * \n * @param origin - The origin/source of the info\n * @param code - The error code\n * @param message - The info message\n * @param extras - Additional issue details\n * @returns A diagnostic entry with 'info' severity\n * \n * @example\n * ```typescript\n * const infoDiagnostic = makeInfo(\n *   'layoutSectionBtoAbsolute',\n *   GRID_ERROR_CODE.GRID_NORMALIZED_TO_POSITIVE_LINES,\n *   'Grid coordinates normalized to positive values'\n * );\n * ```\n */\nexport function makeInfo(\n  origin: DiagnosticOrigin,\n  code: GridErrorCode,\n  message: string,\n  extras: IssueExtras = {}\n): DiagnosticEntry {\n  return makeDiagnostic('info', origin, code, message, extras);\n}\n","/**\n * @fileoverview CSS Grid value types and converters for grid layout system.\n * Provides type definitions and conversion functions from domain objects to CSS strings.\n * @module CSSStringify\n */\n\n/**\n * CSS length value with unit and numeric value.\n * @example\n * ```typescript\n * // --- Types (as you defined) ---\n * const length: CssLength = { unit: \"px\", value: 16 };\n * const percentage: CssLength = { unit: \"%\", value: 100 };\n * ```\n */\nexport type CssLength = { unit: \"px\" | \"em\" | \"rem\" | \"%\"; value: number };\n\n/**\n * CSS Grid track breadth values including lengths, fractional units, and content-based sizing.\n * @example\n * ```typescript\n * const fixedWidth: TrackBreadth = { unit: \"px\", value: 200 };\n * const fractionalWidth: TrackBreadth = { unit: \"fr\", value: 1 };\n * const autoWidth: TrackBreadth = { unit: \"auto\" };\n * ```\n */\nexport type TrackBreadth =\n  | CssLength\n  | { unit: \"fr\"; value: number }\n  | { unit: \"min-content\" }\n  | { unit: \"max-content\" }\n  | { unit: \"fit-content\"; value: CssLength }\n  | { unit: \"auto\" };\n\n/**\n * Grid unit value that can be a track breadth or minmax function.\n * @example\n * ```typescript\n * const simpleUnit: GridUnitValue = { unit: \"fr\", value: 1 };\n * const minmaxUnit: GridUnitValue = { \n *   unit: \"minmax\", \n *   min: { unit: \"px\", value: 100 }, \n *   max: { unit: \"fr\", value: 1 } \n * };\n * ```\n */\nexport type GridUnitValue =\n  | TrackBreadth\n  | { unit: \"minmax\"; min: TrackBreadth; max: TrackBreadth };\n\n/**\n * Gap value for CSS Grid gaps (row-gap, column-gap, gap).\n * @example\n * ```typescript\n * const gap: GapValue = { unit: \"px\", value: 16 };\n * ```\n */\nexport type GapValue = CssLength;\n\n/**\n * Converts a CSS length object to its string representation.\n * \n * @param len - The CSS length object with unit and value\n * @returns CSS string representation\n * \n * @example\n * ```typescript\n * // --- Converters (domain -> CSS string) ---\n * cssLengthToString({ unit: \"px\", value: 16 }); // \"16px\"\n * cssLengthToString({ unit: \"%\", value: 100 }); // \"100%\"\n * ```\n */\nexport function cssLengthToString(len: CssLength): string {\n  return `${len.value}${len.unit}`;\n}\n\n/**\n * Type guard to check if an unknown value is a CssLength object.\n * \n * @param v - The value to check\n * @returns True if the value is a CssLength, false otherwise\n * \n * @example\n * ```typescript\n * // Type guard: is this object a CssLength?\n * if (isCssLength(someValue)) {\n *   // someValue is now typed as CssLength\n *   const css = cssLengthToString(someValue);\n * }\n * ```\n */\nfunction isCssLength(v: unknown): v is CssLength {\n  return (\n    typeof v === \"object\" &&\n    v !== null &&\n    \"unit\" in v &&\n    \"value\" in v &&\n    (v as any).unit &&\n    typeof (v as any).value === \"number\"\n  );\n}\n\n/**\n * Converts a TrackBreadth object to its CSS string representation.\n * \n * @param b - The track breadth object to convert\n * @returns CSS string representation\n * \n * @example\n * ```typescript\n * trackBreadthToString({ unit: \"fr\", value: 1 }); // \"1fr\"\n * trackBreadthToString({ unit: \"auto\" }); // \"auto\"\n * trackBreadthToString({ unit: \"fit-content\", value: { unit: \"px\", value: 200 } }); // \"fit-content(200px)\"\n * ```\n */\nexport function trackBreadthToString(b: TrackBreadth): string {\n  // CssLength case\n  if (isCssLength(b)) return cssLengthToString(b);\n\n  switch (b.unit) {\n    case \"fr\":\n      return `${b.value}fr`;\n    case \"auto\":\n      return \"auto\";\n    case \"min-content\":\n      return \"min-content\";\n    case \"max-content\":\n      return \"max-content\";\n    case \"fit-content\":\n      return `fit-content(${cssLengthToString(b.value)})`;\n    default: {\n      // Exhaustiveness guard: if you add units later, TS should complain here.\n      const _never: never = b;\n      return String(_never);\n    }\n  }\n}\n\n/**\n * Converts a GridUnitValue to its CSS string representation.\n * Handles both simple track breadths and minmax() functions.\n * \n * @param v - The grid unit value to convert\n * @returns CSS string representation\n * \n * @example\n * ```typescript\n * gridUnitValueToString({ unit: \"fr\", value: 1 }); // \"1fr\"\n * gridUnitValueToString({ \n *   unit: \"minmax\", \n *   min: { unit: \"px\", value: 100 }, \n *   max: { unit: \"fr\", value: 1 } \n * }); // \"minmax(100px, 1fr)\"\n * ```\n */\nexport function gridUnitValueToString(v: GridUnitValue): string {\n  // \"minmax\" wrapper case\n  if (typeof v === \"object\" && v !== null && \"unit\" in v && (v as any).unit === \"minmax\") {\n    const mm = v as Extract<GridUnitValue, { unit: \"minmax\" }>;\n    return `minmax(${trackBreadthToString(mm.min)}, ${trackBreadthToString(mm.max)})`;\n  }\n\n  // Otherwise it's a TrackBreadth\n  return trackBreadthToString(v as TrackBreadth);\n}\n\n/**\n * Converts a GapValue to its CSS string representation.\n * \n * @param g - The gap value to convert\n * @returns CSS string representation\n * \n * @example\n * ```typescript\n * gapValueToString({ unit: \"px\", value: 16 }); // \"16px\"\n * gapValueToString({ unit: \"rem\", value: 1 }); // \"1rem\"\n * ```\n */\nexport function gapValueToString(g: GapValue): string {\n  return cssLengthToString(g);\n}\n"],"mappings":";AAKO,IAAM,cAAc,CAAC,MAAM,MAAM,MAAM,MAAM,IAAI;;;AC2EjD,IAAM,kBAAkB;AAAA;AAAA,EAE7B,qBAAqB;AAAA;AAAA,EAGrB,+BAA+B;AAAA;AAAA,EAG/B,oBAAoB;AAAA,EACpB,eAAe;AAAA,EACf,sBAAsB;AAAA,EACtB,wBAAwB;AAAA,EACxB,YAAY;AAAA,EACZ,mCAAmC;AAAA,EACnC,qBAAqB;AAAA,EACrB,2BAA2B;AAAA,EAC3B,iBAAiB;AAAA,EACjB,gBAAgB;AAAA,EAChB,kBAAkB;AAAA,EAClB,aAAa;AAAA,EACb,sBAAsB;AACxB;AA+EO,SAAS,eACd,UACA,QACA,MACA,SACA,SAAsB,CAAC,GACN;AACjB,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA,OAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA,GAAG;AAAA,IACL;AAAA,EACF;AACF;AAoBO,SAAS,UACd,QACA,MACA,SACA,SAAsB,CAAC,GACN;AACjB,SAAO,eAAe,SAAS,QAAQ,MAAM,SAAS,MAAM;AAC9D;AAoBO,SAAS,YACd,QACA,MACA,SACA,SAAsB,CAAC,GACN;AACjB,SAAO,eAAe,WAAW,QAAQ,MAAM,SAAS,MAAM;AAChE;;;AClLO,SAAS,kBAAkB,KAAwB;AACxD,SAAO,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI;AAChC;AAiBA,SAAS,YAAY,GAA4B;AAC/C,SACE,OAAO,MAAM,YACb,MAAM,QACN,UAAU,KACV,WAAW,KACV,EAAU,QACX,OAAQ,EAAU,UAAU;AAEhC;AAeO,SAAS,qBAAqB,GAAyB;AAE5D,MAAI,YAAY,CAAC,EAAG,QAAO,kBAAkB,CAAC;AAE9C,UAAQ,EAAE,MAAM;AAAA,IACd,KAAK;AACH,aAAO,GAAG,EAAE,KAAK;AAAA,IACnB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO,eAAe,kBAAkB,EAAE,KAAK,CAAC;AAAA,IAClD,SAAS;AAEP,YAAM,SAAgB;AACtB,aAAO,OAAO,MAAM;AAAA,IACtB;AAAA,EACF;AACF;AAmBO,SAAS,sBAAsB,GAA0B;AAE9D,MAAI,OAAO,MAAM,YAAY,MAAM,QAAQ,UAAU,KAAM,EAAU,SAAS,UAAU;AACtF,UAAM,KAAK;AACX,WAAO,UAAU,qBAAqB,GAAG,GAAG,CAAC,KAAK,qBAAqB,GAAG,GAAG,CAAC;AAAA,EAChF;AAGA,SAAO,qBAAqB,CAAiB;AAC/C;AAcO,SAAS,iBAAiB,GAAqB;AACpD,SAAO,kBAAkB,CAAC;AAC5B;","names":[]}